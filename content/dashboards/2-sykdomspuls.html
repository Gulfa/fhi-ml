---
title: Sykdomspulsen
author: Richard White
date: '2019-01-02'
slug: sykdomspulsen
categories: []
tags: []
toc: true
class: article
---


<div id="TOC">
true
</div>

<pre class="r"><code>library(sykdomspuls)</code></pre>
<pre><code>## PACKAGE: sykdomspuls</code></pre>
<pre><code>## Version 2019.08.19 at 11:53</code></pre>
<pre><code>## Developed by Richard White, Gunnar Ro</code></pre>
<pre><code>## Department of Infectious Disease Epidemiology and Modelling</code></pre>
<pre><code>## Norwegian Institute of Public Health</code></pre>
<pre><code>## https://folkehelseinstituttet.github.io/dashboards_sykdomspuls/</code></pre>
<p><code>sykdomspuls</code> requres a specific raw data format. We require one (or less) rows for each structural variable:</p>
<pre class="r"><code>print(as.character(sykdomspuls::VARS$REQ_DATA_RAW))</code></pre>
<pre><code>##  [1] &quot;age&quot;                 &quot;date&quot;                &quot;Kontaktype&quot;         
##  [4] &quot;Praksis&quot;             &quot;municip&quot;             &quot;influensa&quot;          
##  [7] &quot;gastro&quot;              &quot;respiratoryinternal&quot; &quot;respiratoryexternal&quot;
## [10] &quot;lungebetennelse&quot;     &quot;bronkitt&quot;            &quot;skabb&quot;              
## [13] &quot;emerg1&quot;              &quot;emerg2&quot;              &quot;emerg3&quot;             
## [16] &quot;emerg4&quot;              &quot;emerg5&quot;              &quot;consult&quot;</code></pre>
<p>For each row, the variables saved in <code>sykdomspuls::CONFIG$SYNDROMES</code> and <code>sykdomspuls::VARS$REQ_DATA_RAW_OTHER</code> contain the number of consultations that occurred for that combination of structural variables.</p>
<pre class="r"><code>print(as.character(sykdomspuls::CONFIG$SYNDROMES))</code></pre>
<pre><code>## [1] &quot;c(\&quot;influensa\&quot;, \&quot;gastro\&quot;, \&quot;respiratoryinternal\&quot;, \&quot;respiratoryexternal\&quot;, \&quot;lungebetennelse\&quot;, \&quot;bronkitt\&quot;, \&quot;consult_with_influenza\&quot;, \&quot;consult_without_influenza\&quot;, \&quot;skabb\&quot;, \&quot;emerg1\&quot;, \&quot;emerg2\&quot;, \&quot;emerg3\&quot;, \&quot;emerg4\&quot;, \&quot;emerg5\&quot;)&quot;                                                                                                                                                                                                                                                                                                          
## [2] &quot;c(\&quot;influensa\&quot;, \&quot;gastro\&quot;, \&quot;respiratoryinternal\&quot;, \&quot;respiratoryexternal\&quot;, \&quot;lungebetennelse\&quot;, \&quot;bronkitt\&quot;, \&quot;consult_with_influenza\&quot;, \&quot;consult_without_influenza\&quot;, \&quot;skabb\&quot;, \&quot;emerg1\&quot;, \&quot;emerg2\&quot;, \&quot;emerg3\&quot;, \&quot;emerg4\&quot;, \&quot;emerg5\&quot;)&quot;                                                                                                                                                                                                                                                                                                          
## [3] &quot;c(\&quot;syndrome\&quot;, \&quot;syndrome\&quot;, \&quot;syndrome\&quot;, \&quot;syndrome\&quot;, \&quot;syndrome\&quot;, \&quot;syndrome\&quot;, \&quot;consult\&quot;, \&quot;consult\&quot;, \&quot;syndrome\&quot;, \&quot;syndrome\&quot;, \&quot;syndrome\&quot;, \&quot;syndrome\&quot;, \&quot;syndrome\&quot;, \&quot;syndrome\&quot;)&quot;                                                                                                                                                                                                                                                                                                                                                          
## [4] &quot;c(\&quot;Influensa\&quot;, \&quot;Mage-tarm diagnose\&quot;, \&quot;Øvre-luftvei diagnose\&quot;, \&quot;Øvre-luftvei diagnose\&quot;, \&quot;Lungebetennelse diagnose\&quot;, \&quot;Bronkitt diagnose\&quot;, \&quot;consult_with_influenza\&quot;, \&quot;consult_without_influenza\&quot;, \&quot;Skabb diagnose\&quot;, \&quot;emerg1 diagnose\&quot;, \&quot;emerg2 diagnose\&quot;, \&quot;emerg3 diagnose\&quot;, \&quot;emerg4 diagnose\&quot;, \&quot;emerg5 diagnose\&quot;)&quot;                                                                                                                                                                                                                  
## [5] &quot;c(\&quot;Influensa\&quot;, \&quot;Mage-tarm\&quot;, \&quot;Luftvei\&quot;, \&quot;Luftvei\&quot;, \&quot;Lungebet\&quot;, \&quot;Bronkitt\&quot;, \&quot;ConsWithInf\&quot;, \&quot;ConsWOInf\&quot;, \&quot;Skabb\&quot;, \&quot;emerg1\&quot;, \&quot;emerg2\&quot;, \&quot;emerg3\&quot;, \&quot;emerg4\&quot;, \&quot;emerg5\&quot;)&quot;                                                                                                                                                                                                                                                                                                                                                                 
## [6] &quot;c(TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                               
## [7] &quot;c(TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE)&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                
## [8] &quot;c(FALSE, TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## [9] &quot;list(\&quot;Legekontakt\&quot;, c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;), c(\&quot;Legekontakt\&quot;, \&quot;Telefonkontakt\&quot;))&quot;</code></pre>
<pre class="r"><code>print(as.character(sykdomspuls::VARS$REQ_DATA_RAW_OTHER))</code></pre>
<pre><code>## character(0)</code></pre>
<p>In total, we require the following variables:</p>
<pre class="r"><code>print(as.character(sykdomspuls::VARS$REQ_DATA_RAW_ALL))</code></pre>
<pre><code>## character(0)</code></pre>
<p>We can use the function <code>GenFakeDataRaw()</code> to generate a set of fake data for <code>municip5054</code>.</p>
<pre class="r"><code>d &lt;- GenFakeDataRaw()
print(d)</code></pre>
<pre><code>##         age       date     Kontaktype  Praksis     municip influensa
##      1: 0-4 2006-01-01 Telefonkontakt Fastlege municip1624         9
##      2: 0-4 2006-01-02 Telefonkontakt Fastlege municip1624         4
##      3: 0-4 2006-01-03 Telefonkontakt Fastlege municip1624         3
##      4: 0-4 2006-01-04 Telefonkontakt Fastlege municip1624         7
##      5: 0-4 2006-01-05 Telefonkontakt Fastlege municip1624         7
##     ---                                                             
## 227900: 65+ 2019-12-27    Legekontakt Legevakt municip5054         2
## 227901: 65+ 2019-12-28    Legekontakt Legevakt municip5054         5
## 227902: 65+ 2019-12-29    Legekontakt Legevakt municip5054         7
## 227903: 65+ 2019-12-30    Legekontakt Legevakt municip5054         3
## 227904: 65+ 2019-12-31    Legekontakt Legevakt municip5054         4
##         gastro respiratoryinternal respiratoryexternal lungebetennelse
##      1:      6                   2                   4               4
##      2:      7                   8                   7               9
##      3:      7                   3                   5              12
##      4:      2                   3                   3               6
##      5:      2                   3                   8               3
##     ---                                                               
## 227900:      6                   5                   3               8
## 227901:      6                   4                   6               8
## 227902:      7                   6                   4              15
## 227903:      6                   9                   4               5
## 227904:      3                   4                  10               3
##         bronkitt skabb emerg1 emerg2 emerg3 emerg4 emerg5 consult
##      1:        4     3      6      6      1     10      6     119
##      2:        7     7      8      7      2      6      4     136
##      3:        7     4      5      2      6      7      5     109
##      4:        5     5      5     10      6      3      3     102
##      5:        8     7      2      4      8      4      6     111
##     ---                                                          
## 227900:        2     4     11      7      8      2      9     115
## 227901:        2     3      6      1      3      0      7      98
## 227902:        2     3      3      8      1      6      5     116
## 227903:        1     4      3      2      5      5      5     100
## 227904:        3     4      4      4      7      6      2     106</code></pre>
<p>And we can then use the function <code>ValidateDataRaw()</code> to ensure that our fake data is in the correct format:</p>
<pre class="r"><code>print(ValidateDataRaw(d))</code></pre>
<pre><code>## [1] TRUE</code></pre>
